(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{502:function(s,n,t){"use strict";t.r(n);var a=t(30),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"服务器部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器部署"}},[s._v("#")]),s._v(" 服务器部署")]),s._v(" "),t("h3",{attrs:{id:"前提条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[s._v("#")]),s._v(" 前提条件")]),s._v(" "),t("p",[s._v("1、拥有一个服务器")]),s._v(" "),t("p",[s._v("2、已经"),t("RouterLink",{attrs:{to:"/pages/6809f1/"}},[s._v("备案好的域名")])],1),s._v(" "),t("p",[s._v("3、安装了远程连接工具"),t("code",[s._v("Xshell、xftp")]),s._v("("),t("a",{attrs:{href:"https://www.xshell.com/zh/free-for-home-school/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),t("OutboundLink")],1),s._v("，下载免费版的就可以了)")]),s._v(" "),t("p",[s._v("服务器安装并且配置好"),t("code",[s._v("Git")]),s._v("、将编译好的静态页面下载并解压直接放到"),t("code",[s._v("Nginx")]),s._v("指定的"),t("code",[s._v("index")]),s._v("目录下。")]),s._v(" "),t("blockquote",[t("p",[s._v("我的博客部署思路：")]),s._v(" "),t("p",[s._v("前提条件：在"),t("code",[s._v("Nginx")]),s._v("的配置文件"),t("code",[s._v("nginx.conf")]),s._v("设置的静态资源存放文件夹名字和 Gitee 仓库名相同。")]),s._v(" "),t("p",[s._v("本地编辑文章 -> 上传到 Github -> 使用 Github Action 实现自动编译项目生成 HTML 静态资源放在 gh-pages 分支，并将 Github  内容同步到 Gitee -> 在服务器 /usr/local/nginx 路径中克隆 Gitee 仓库的 gh-pages 分支文件")])]),s._v(" "),t("h3",{attrs:{id:"_1、安装git"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装git"}},[s._v("#")]),s._v(" 1、安装git")]),s._v(" "),t("p",[s._v("1.1 使用"),t("code",[s._v("yum")]),s._v("安装报错")]),s._v(" "),t("p",[s._v("执行安装命令"),t("code",[s._v("yum install -y git")]),s._v("时报如下错误：")]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("问题分析：下载元数据失败，提示在镜像列表中没有下载源，查找"),t("a",{attrs:{href:"https://help.aliyun.com/document_detail/405635.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("通知：CentOS 8 操作系统版本结束了生命周期（EOL），Linux社区已不再维护该操作系统版本。建议您切换到 Anolis 或 Alinux。如果您的业务过渡期仍需要使用 CentOS 8 系统中的一些安装包，请根据下文切换CentOS 8 的源。")])])]),s._v(" "),t("p",[s._v("解决办法：根据官网步骤依次执行，将原来的镜像源替换掉"),t("code",[s._v("yum")]),s._v("工具就可以正常使用了。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/qeqpoququtt/article/details/122855846?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-2.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-2.pc_relevant_paycolumn_v3&utm_relevant_index=5",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装，不一定是最新的")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" --version\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置git用户信息（注册git时的用户名和密码）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Your Name"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.email "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"email@example.com"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_2、node安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、node安装"}},[s._v("#")]),s._v(" 2、"),t("code",[s._v("Node")]),s._v("安装")]),s._v(" "),t("p",[s._v("2.1 安装 Node")]),s._v(" "),t("p",[s._v("1、查看操作系统版本：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". node-v14.5.0-darwin-x64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -p")]),s._v("\nx86_64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("2、根据操作系统的版本安装对应版本的"),t("code",[s._v("Node")])]),s._v(" "),t("p",[s._v("（1）方法一：进入"),t("a",{attrs:{href:"http://nodejs.cn/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("node官网"),t("OutboundLink")],1),s._v("，下载"),t("code",[s._v("node-v16.14.0-linux-x64")]),s._v("的压缩包到本地，然后通过"),t("code",[s._v("FTP")]),s._v("工具上传到"),t("code",[s._v("/usr/local/src/")]),s._v("目录下。")]),s._v(" "),t("p",[s._v("（2）方法二：在指定的文件夹下使用"),t("code",[s._v("wget")]),s._v("命令下载")]),s._v(" "),t("blockquote",[t("p",[s._v("wget https://registry.npmmirror.com/-/binary/node/v16.14.0/node-v16.14.0-linux-x64.tar.xz")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 /usr/local/src 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/src\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf node-v16.14.0-linux-x64.tar.gz\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重命名解压的文件夹为 nodejs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" node-v16.14.0-linux-x64 nodejs\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 /usr/local/src/nodejs/bin 文件夹下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". src"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd nodejs/bin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 node版本号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./node -v")]),s._v("\nv16.14.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置软连接，方便全局访问")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/usr/local/src/nodejs/bin\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /usr/local/src/nodejs/bin/node /usr/local/bin/node")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /usr/local/src/nodejs/bin/npm /usr/local/bin/npm")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("blockquote",[t("p",[s._v("查看安装的"),t("code",[s._v("node")]),s._v("版本：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". node-v14.5.0-darwin-x64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# node -v")]),s._v("\n-bash: /usr/bin/node: cannot execute binary file: Exec "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" error\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("解决"),t("code",[s._v("node -v")]),s._v("报错"),t("code",[s._v("cannot execute binary file: Exec format error")]),s._v("（不能执行二进制文件）的问题："),t("a",{attrs:{href:"https://www.cnblogs.com/goloving/p/14788900.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("在执行任何的程序之前，必须确保程序和系统的版本位数是一致的，如果一种是"),t("code",[s._v("x64")]),s._v("，一种是"),t("code",[s._v("32")]),s._v("位的，就会出现上述的问题。")]),s._v(" "),t("p",[t("code",[s._v("linux")]),s._v("系统下遇到"),t("code",[s._v("cannot execute binary file")]),s._v("的问题，一般由以下情况造成：")]),s._v(" "),t("ol",[t("li",[s._v("非"),t("code",[s._v("root")]),s._v("用户或者无执行权限（在命令前加"),t("code",[s._v("sudo")]),s._v("可以将当前用户的权限提升为"),t("code",[s._v("root")]),s._v("权限）")]),s._v(" "),t("li",[s._v("编译环境不同（程序由其他操作环境复制过来）")])])]),s._v(" "),t("p",[s._v("如果配置软连接出现的问题：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入软连接的目录,查看软连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/bin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\nlrwxrwxrwx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" Feb "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":31 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/src/nodejs/bin/node\nlrwxrwxrwx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" Feb "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":32 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/src/nodejs/bin/npm\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软连接的删除：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1、会删除文件夹下的所有内容，但是没有删除这个链接；")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf ./node/  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2、则是仅删除这个软链接，不会删除下面的内容。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf ./node   ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("保险起见我们再进行全局环境变量配置："),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/49741341",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考链接"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入到profile文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/profile")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("//在文件的末尾添加一下三行语句 \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/node\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_HOME")]),s._v("/bin\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_HOME")]),s._v("/lib/node_modules\n//按ESC键，再输入:wq保存并退出\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置完成后执行 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source /etc/profile")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#为了保证每个账户下该配置均可用需要")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /root/.bashrc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("//在这个文件的末尾加上以下这句语句\nsource etc/profile\n//按ESC键，再输入:wq保存并退出\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("修改 "),t("code",[s._v(".bashrc")]),s._v(" 文件:")]),s._v(" "),t("p",[s._v("这种方法更为安全，它可以把使用这些环境变量的权限控制到用户级别，如果你需要给某个用户权限使用这些环境变量，你只需要修改其个人用户主目录下的"),t("code",[s._v(".bashrc")]),s._v("文件就可以了。")])]),s._v(" "),t("h3",{attrs:{id:"_3、ssh公私钥生成并配置公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、ssh公私钥生成并配置公钥"}},[s._v("#")]),s._v(" 3、"),t("code",[s._v("SSH")]),s._v("公私钥生成并配置公钥")]),s._v(" "),t("p",[s._v("（1）生成公私钥（一种权限验证的方式相当于用户名密码，生成公私钥后就可以对你的"),t("code",[s._v("Git")]),s._v("仓库进行各种操作）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# ssh-keygen -t rsa -C "xxxx@xx.com"')]),s._v("\nGenerating public/private rsa key pair.\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一路按回车键即可")]),s._v("\nEnter "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" to save the key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.ssh/id_rsa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nEnter passphrase "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" no passphrase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nEnter same passphrase again: \nYour identification has been saved "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /root/.ssh/id_rsa.\nYour public key has been saved "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /root/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:MzWymVIbbWmN/B220LlkRJ1ifbrN9GttLmEGOipVHDw xx@xx.com\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看公钥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /root/.ssh/id_rsa.pub")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("配置公钥：")]),s._v(" "),t("p",[s._v("将生成公钥配置到"),t("code",[s._v("Git")]),s._v("仓库：将"),t("code",[s._v("/root/.ssh")]),s._v("目录下的公钥配置到代码托管平台。")]),s._v(" "),t("blockquote",[t("p",[s._v("将鼠标移到头像处点击设置 -> 在左侧的安全设置中点击 SSH 公钥  -> 输入公钥标题（随意） ->  将公钥的内容全选复制到公钥栏 -> 点击确定")])]),s._v(" "),t("p",[s._v("添加完成后就可以对你的仓库进行操作了。")]),s._v(" "),t("h3",{attrs:{id:"_4、nginx-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、nginx-安装"}},[s._v("#")]),s._v(" 4、Nginx 安装")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.it235.com/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/Linux/linux01.html#nginx%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料1"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.bilibili.com/video/BV1gt411A798?p=6",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料2"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("（1）本地下载")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx 下载网址"),t("OutboundLink")],1),s._v("手动下载后通过"),t("code",[s._v("xftp")]),s._v("上传到"),t("code",[s._v("usr/local")]),s._v("目录下。")]),s._v(" "),t("p",[s._v("（2）"),t("code",[s._v("wget")]),s._v("直接下载")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://nginx.org/download/nginx-1.17.1.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("（3）在服务器"),t("code",[s._v("Nginx")]),s._v("压缩包的目录下解压：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf nginx-1.17.1.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("注意: "),t("code",[s._v("nginx")]),s._v("被解压到了"),t("code",[s._v("/usr/local/nginx-1.17.1")]),s._v("目录下(不要把压缩包解压到"),t("code",[s._v("/usr/local/nginx")]),s._v("目录\n下，或者将解压后的目录重命名为"),t("code",[s._v("nginx")]),s._v("，因为"),t("code",[s._v("nginx")]),s._v("会默认安装到"),t("code",[s._v("/usr/local/nginx")]),s._v("目录下)")]),s._v(" "),t("p",[s._v("（4）安装前准备")]),s._v(" "),t("p",[s._v("安装前先安装nginx所需的依赖库，如果缺少依赖库，可能会安装失败")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pcre \nyum insta1l pcre-devel\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zlib\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zlib-devel\nyum insta1l openssl\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssl-devel\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("当询问时一路输入"),t("code",[s._v("y")])]),s._v(" "),t("p",[s._v("（5）进入"),t("code",[s._v("nginx-1.17.1")]),s._v("目录，并执行以下配置命令")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.17.1\n./configure\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("code",[s._v("configure")]),s._v("操作会检测当前系统环境，以确保能成功安装"),t("code",[s._v("nginx")]),s._v("，如果出错，请检查上述安装依赖包是否已经安装。")]),s._v(" "),t("p",[s._v("如果出现如下信息表示你需要安装依赖库")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("gcc")]),s._v("库未安装提示")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("checking "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" OS\n\t+ Linux "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-123.e17.x86_64 x86_64\n\tchecking "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" C compiler "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". not found\n\t./configure: error: C compiler CC is not found\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("PCRE 库未安装提示")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./configure error: the HTTP rewrite module requires the PCRE library.\nYou can either disable the module by using --without-http- rewrite. module\noption, or insta1l the PCRE library into the system, or build the PCRE library\nstatically from the sour.ce with nginx by using --with-pcre"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" option. \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("zlib 库未安装提示")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("./configure: error: the HTTP "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" module requires the z1ib library.\nYou can either disable the module by using --without-http_gzip_module\noption, or insta11 the zlib library into the system, or build the z1ib library \nstatically from the "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" with nginx by using --with-z1ib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" option.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("p",[s._v("（6）执行安装")]),s._v(" "),t("p",[s._v("注意：下面 2 步会将"),t("code",[s._v("nginx")]),s._v("安装到"),t("code",[s._v("/usr/local/nginx")]),s._v("目录下，所以请勿占用"),t("code",[s._v("nginx")]),s._v("目录命名")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在解压缩的 nginx-1.17.1 目录下执行下面的命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("执行命令后会有一个"),t("code",[s._v("nginx")]),s._v("文件夹生成（和"),t("code",[s._v("nginx-1.17.1")]),s._v("目录是同级的）")]),s._v(" "),t("p",[s._v("（7）配置"),t("code",[s._v("Nginx")]),s._v("开机启动")]),s._v(" "),t("p",[s._v("切换到"),t("code",[s._v("/lib/systemd/system")]),s._v("/目录，创建"),t("code",[s._v("nginx.service")]),s._v("文件"),t("code",[s._v("vim nginx. service")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /lib/systemd/system/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("按"),t("code",[s._v("i")]),s._v("进行编辑模式，添加如下内容：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx reload\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx quit\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("wantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("添加完后按"),t("code",[s._v("Esc")]),s._v("退出编辑模式，输入"),t("code",[s._v(":wq")]),s._v("保存并退出。（"),t("code",[s._v(":q!")]),s._v("强制退出）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行如下命令使nginx开机启动")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动nginx")]),s._v("\nsystemctl start nginx.service\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 nginx 进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("此时在浏览器输入服务器的公网"),t("code",[s._v("IP")]),s._v("进行访问验证是否安装成功，出现"),t("code",[s._v("Welcome to nginx")]),s._v("表示配置成功，否则失败。")]),s._v(" "),t("p",[s._v("若配置失败需要查看对应的端口是否开放：")]),s._v(" "),t("blockquote",[t("p",[s._v("1、安全组策略是否打开 nginx 对应的端口（一般是 80 端口）\n2、防火墙配置：防火墙是否放行 nginx 对应端口")])]),s._v(" "),t("p",[s._v("（8）防火墙配置")]),s._v(" "),t("p",[s._v("本地虚拟机（或云服务器）需要开启防火墙，"),t("code",[s._v("CentOS 6")]),s._v("采用的"),t("code",[s._v("iptables")]),s._v("，而"),t("code",[s._v("CentOS 7")]),s._v("采用的是"),t("code",[s._v("systemctl")]),s._v("，所以下面我们采用"),t("code",[s._v("CentOS 7")]),s._v("的配置")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看防火墙状态")]),s._v("\nsystemctl status firewalld\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动防火墙，防火墙启动后，除了22端口对外能够访问，其他端口均不能使用，所以需要添加")]),s._v("\nsystemctl start firewalld\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加端口")]),s._v("\nfirewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重新加载")]),s._v("\nfirewall-cmd --reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"_5、ssl-证书安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、ssl-证书安装"}},[s._v("#")]),s._v(" 5、SSL 证书安装")]),s._v(" "),t("p",[s._v("在进行"),t("code",[s._v("SSL")]),s._v("证书安装之前，你应该拥有一个域名并且"),t("RouterLink",{attrs:{to:"/pages/6809f1/"}},[s._v("申请了"),t("code",[s._v("SSL")]),s._v("证书")]),s._v("。")],1),s._v(" "),t("p",[s._v("（1）进入"),t("code",[s._v("/usr/local/nginx/conf/")]),s._v("目录配置"),t("code",[s._v("nginx.conf")]),s._v("配置文件")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入/usr/local/nginx/conf/目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.conf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将如下内容添加到 http{} 中")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 所有http的请求，统一发到https请求上")]),s._v("\n    server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server_name  www.gyunf.top *.gyunf.top"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#需要将www.gyunf.top替换成证书绑定的域名。")]),s._v("\n        rewrite ^"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$  https://"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" permanent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将所有HTTP请求通过rewrite指令重定向到HTTPS")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未带www的请求，统一分发到https://www上")]),s._v("\n   server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置HTTPS的默认访问端口为443，如果未在此处配置HTTPS的默认访问端口，可能会造成Nginx无法启动。")]),s._v("\n         server_name  gyunf.top"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v(" https://www.gyunf.top"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https 请求处理")]),s._v("\n    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" default_server ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server_name  www.gyunf.top"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        ssl_certificate cert/7064378_www.gyunf.top.pem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        ssl_certificate_key cert/7064378_www.gyunf.top.key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表示使用的加密套件的类型。")]),s._v("\n        ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表示使用的TLS协议的类型。")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset koi8-r;")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#access_log  logs/host.access.log  main;")]),s._v("\n        location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root   XXX"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放静态资源项目的文件夹")]),s._v("\n            index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("blockquote",[t("p",[s._v("root   XXX; # 存放静态资源项目的文件夹（这个很重要，后面我们要将静态资源方法到该文件夹下以便外网访问）")])]),s._v(" "),t("p",[s._v("修改配置文件后需要重新加载以下配置文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/usr/local/nginx/sbin/nginx -s reload "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重新载入配置文件。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("验证配置文件的语法正确性：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/nginx/sbin/nginx -t")]),s._v("\nnginx: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" the "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssl"')]),s._v(" parameter requires ngx_http_ssl_module "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /usr/local/nginx/conf/nginx.conf:46\nnginx: configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /usr/local/nginx/conf/nginx.conf "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" failed\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("问题："),t("code",[s._v('nginx: [emerg] the "ssl" parameter requires ngx_http_ssl_module in /usr/local/nginx/conf/nginx.conf:46')]),s._v("显示"),t("code",[s._v("nginx")]),s._v("没有"),t("code",[s._v("ssl")]),s._v("模块。")]),s._v(" "),t("p",[s._v("[nginx: "),t("a",{attrs:{href:"https://www.cnblogs.com/ghjbk/p/6744131.html",target:"_blank",rel:"noopener noreferrer"}},[s._v('emerg] the "ssl" parameter requires ngx_http_ssl_module in /usr/local/nginx/conf/nginx.conf:37'),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("解决办法：添加 SSL 模块")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到源码安装包，就是带版本的那个nginx文件夹")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/loca1/nginx-1.17.1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行如下命令")]),s._v("\n./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切忌，只执行make,不要执行make install, 否则会覆盖")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭 nginx 服务，")]),s._v("\nsystemctl stop nginx.service\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -f /usr/local/nginx-1.17.1/objs/nginx /usr/local/nginx/sbin/nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启查看版本")]),s._v("\nsystemctl start nginx.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带有 SSL 模块时，进入 /usr/local/nginx/sbin ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./nginx -V")]),s._v("\nnginx version: nginx/1.17.1\nbuilt by gcc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.8")]),s._v(".5 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20150623")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Red Hat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.8")]),s._v(".5-36"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GCC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconfigure arguments: --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("（2）开放 443 端口和防火墙（ 80 端口的操作也相同）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/nginx/sbin/nginx -t")]),s._v("\nnginx: the configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /usr/local/nginx/conf/nginx.conf "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" is successful\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 443 端口是否开放")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -nplt lgrep 443")]),s._v("\nActive Internet connections "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only servers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("756543")]),s._v("/nginx: maste \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1502")]),s._v("/sshd           \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8888            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("998")]),s._v("/python          \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1425")]),s._v("/master         \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:443             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("756543")]),s._v("/nginx: maste \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::8080                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("853")]),s._v("/jsvc.exec       \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ::1:25                  :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1425")]),s._v("/master         \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::33060                :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2177")]),s._v("/mysqld         \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::8009                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("853")]),s._v("/jsvc.exec       \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2177")]),s._v("/mysqld         \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙运行状态")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --state")]),s._v("\nrunning\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙放行的端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --list-ports")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39000")]),s._v("-40000/tcp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[s._v("从上述防火墙放行的端口情况可以看出，服务器的防火墙没有放行"),t("code",[s._v("443")]),s._v("端口。我们需要手动放行。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置防火墙放行443端口（永久放行）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --zone=public --add-port=443/tcp --permanent")]),s._v("\nsuccess\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启防火墙")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --reload")]),s._v("\nsuccess\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看放行端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --list-ports")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39000")]),s._v("-40000/tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/tcp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 echo 命令在服务器端模拟客户端，检查本地 443 端口加载的 HTTPS 服务以及证书是否正常")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo | openssl s_client -connect 127.0.0.1:443 -servername gyunf.top 2>/dev/null")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("若结果出现"),t("code",[s._v("SSL Session")]),s._v("表示"),t("code",[s._v("HTTPS")]),s._v("服务正常运行。服务器配置的"),t("code",[s._v("SSL")]),s._v("证书是可用的。")]),s._v(" "),t("p",[s._v("若提示"),t("code",[s._v("connect:errno=111")]),s._v("表示没有服务，建议您检查"),t("code",[s._v("Nginx")]),s._v("是否启动。")]),s._v(" "),t("p",[s._v("开放"),t("code",[s._v("443")]),s._v("端口的安全组策略：")]),s._v(" "),t("p",[s._v("更新安全组策略，放行"),t("code",[s._v("TCP")]),s._v("协议"),t("code",[s._v("443")]),s._v("端口的入方向请求，授权对象是"),t("code",[s._v("0.0.0.0/0")]),s._v("，然后在浏览器访问域名检查是否可用。")]),s._v(" "),t("p",[s._v("6、在 Nginx 中部署静态资源")]),s._v(" "),t("p",[s._v("上述第"),t("code",[s._v("5")]),s._v("步"),t("code",[s._v("SSL")]),s._v("证书安装中，我们在"),t("code",[s._v("Nginx")]),s._v("的配置文件"),t("code",[s._v("nginx.conf")]),s._v("设置了静态资源存放的文件夹为"),t("code",[s._v("XXX")]),s._v("。（可以自己随意命名，我是和 Gitee 仓库名一致这样方便我通过脚本自动克隆代码简化部署步骤）")]),s._v(" "),t("blockquote",[t("p",[s._v("我的博客部署思路：")]),s._v(" "),t("p",[s._v("前提条件：在"),t("code",[s._v("Nginx")]),s._v("的配置文件"),t("code",[s._v("nginx.conf")]),s._v("设置的静态资源存放文件夹名字和 Gitee 仓库名相同。")]),s._v(" "),t("p",[s._v("本地编辑文章 -> 上传到 Github -> 使用 Github Action 实现自动编译项目生成 HTML 静态资源放在 gh-pages 分支，并将 Github  内容同步到 Gitee -> 在服务器 /usr/local/nginx 路径中克隆 Gitee 仓库的 gh-pages 分支文件")])]),s._v(" "),t("p",[s._v("创建克隆项目的脚本：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 /usr/local/nginx 文件夹，创建一个脚本文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch st.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 授予 st.sh 脚本执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod 775 st.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 st.sh 脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim st.sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 st.sh 脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./st.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("code",[s._v("st.sh")]),s._v("脚本的执行命令如下：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 nginx 文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除原有的静态资源文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("  -rf gyf11069\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 克隆gh-pages分支的项目资源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone -b gh-pages git@gitee.com:gyunf/gyf11069.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("以后每次更新博客只要执行一次该脚本即可。")]),s._v(" "),t("h3",{attrs:{id:"_6、定时执行脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、定时执行脚本"}},[s._v("#")]),s._v(" 6、定时执行脚本")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("crontabs")]),s._v("定时执行脚本")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 crontabs ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install crondtabs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #设为开机启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl enable crond")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动crond服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start crond")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status crond")]),s._v("\n● crond.service - Command Scheduler\n   Loaded: loaded "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/lib/systemd/system/crond.service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Active: active "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Tue "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-02-22 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":10:55 CST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" weeks "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" days ago\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 crontab 内容设置定时执行的脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/crontab")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("设置指定时间以及需要执行的脚本或命令。")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("code",[s._v("*/30 * * * root /usr/local/nginx/st.sh")]),s._v(" (每天，每30分钟执行一次 "),t("code",[s._v("st.sh")]),s._v(" 脚本)")]),s._v(" "),t("li",[t("code",[s._v("* 3 * * * root /usr/local/nginx/st.sh")]),s._v(" (每天凌晨三点，执行命令脚本，PS:这里由于第一个的分钟没有设置，那么就会每天凌晨3点的每分钟都执行一次命令)")]),s._v(" "),t("li",[t("code",[s._v("0 3 * * * root /usr/local/nginx/st.sh")]),s._v(" (这样就是每天凌晨三点整执行一次命令脚本)")]),s._v(" "),t("li",[t("code",[s._v("*/10 11-13 * * * root /usr/local/nginx/st.sh")]),s._v(" (每天11点到13点之间，每10分钟执行一次命令脚本，这一种用法也很常用)")]),s._v(" "),t("li",[t("code",[s._v("10-30 * * * * root /usr/local/nginx/st.sh")]),s._v(" (每小时的10-30分钟，每分钟执行一次命令脚本，共执行20次)")]),s._v(" "),t("li",[t("code",[s._v("10,30 * * * * * root /usr/local/nginx/st.sh")]),s._v(" (每小时的10,30分钟，分别执行一次命令脚本，共执行2次）")])])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加载任务,使之生效")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# crontab /etc/crontab")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看任务 列出用户的定时任务列表")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZbp13mkmwsaey4fbsreozZ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#crontab -u root -l")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SHELL")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sbin:/bin:/usr/sbin:/usr/bin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAILTO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For details see man 4 crontabs")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Example of job definition:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# .---------------- minute (0 - 59)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  .------------- hour (0 - 23)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  .---------- day of month (1 - 31)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  |  |  |")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# *  *  *  *  * user-name  command to be executed")]),s._v("\n */2 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("-12 *  *  * root /usr/local/nginx/st.sh  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("我测试时设置的每天"),t("code",[s._v("11-12")]),s._v("点之间，每两分钟执行一次部署脚本。")]),s._v(" "),t("p",[s._v("到此处服务端算是实现了自动部署，我们只需在本地写好文章，然后上传到"),t("code",[s._v("Github\\Gitee")]),s._v("就行了，每天的指定时间服务器都会通过"),t("code",[s._v("crontabs")]),s._v("自动执行部署脚本，将博客进行部署。")]),s._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("这次的服务器部署的过程真的是很坎坷的，我从寒假期间就开始跟着别人的博客折腾，刚开始是想和别人一样使用"),t("code",[s._v("Docker")]),s._v("容器来实现自动化部署，通过"),t("code",[s._v("Docker")]),s._v("容器的网桥和虚拟镜像技术实现"),t("code",[s._v("Nginx")]),s._v("和"),t("code",[s._v("PHP")]),s._v("镜像实例的相互通信，通过"),t("code",[s._v("PHP")]),s._v("脚本当仓库的代码更新后就会自动拉取"),t("code",[s._v("Gitee")]),s._v("仓库代码，然后将"),t("code",[s._v("Docker")]),s._v("容器的端口和"),t("code",[s._v("Docker")]),s._v("容器中的"),t("code",[s._v("Nginx")]),s._v("镜像实例端口进行映射，这样在服务器中通过"),t("code",[s._v("Docker")]),s._v("容器的端口就可以访问"),t("code",[s._v("Docker")]),s._v("容器中的"),t("code",[s._v("Nginx")]),s._v("镜像实例里的资源。虽然我对"),t("code",[s._v("Docker")]),s._v("这个容器化技术一无所知，但是这种解放双手的全自动化部署深深吸引了我，于是我就参考 "),t("a",{attrs:{href:"https://notes.youngkbt.cn/about/website/server/",target:"_blank",rel:"noopener noreferrer"}},[s._v("youngkbt"),t("OutboundLink")],1),s._v(" 的博客和 "),t("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 官网"),t("OutboundLink")],1),s._v(" 实践了一下，虽然是按照别人的步骤一步一步来，但是中间还是踩到了很多坑，一边百度填坑一边踩新坑，瞎折腾几天后我还是没有成功。")]),s._v(" "),t("p",[s._v("后来我决定修改部署方案，开始按照 "),t("a",{attrs:{href:"https://www.it235.com/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/Linux/linux01.html#nginx%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[s._v("君哥的学习笔记"),t("OutboundLink")],1),s._v(" 的方案进行部署，这个方案是先将"),t("code",[s._v("Gitee")]),s._v("仓库源代码拉取到服务器文件夹里，然后通过"),t("code",[s._v("Node")]),s._v("以前台的方式启动博客，此时博客是运行在一个特定的端口的，在"),t("code",[s._v("Nginx")]),s._v("配置文件中通过代理端口的方式（即访问"),t("code",[s._v("Nginx")]),s._v("时会自动映射到博客项目的端口），最后通过脚本拉取代码并启动博客。在配置了两天后我终于在最后一步自动化脚本的命令执行中踩到了新坑，这一次我离成功只差一个脚本。")]),s._v(" "),t("p",[s._v("最后我决定转换思路，不通过"),t("code",[s._v("Node")]),s._v("以前台的方式启动博客，直接将编译好的博客（静态资源文件）放到"),t("code",[s._v("Nginx")]),s._v("的项目文件夹里，每次更新博客时先将博客文件夹删除，然后将仓库中编译好的博客克隆下来，按照这种思路我将删除文件夹和克隆项目的命令写到了一个脚本中，每次更新博客就到指定路径下执行该脚本就可以更新博客了。")]),s._v(" "),t("p",[s._v("在博客部署的过程我遇到了很多的问题，也学到了很多东西，从最初的博客选型、本地博客的运行、上传博客源码到"),t("code",[s._v("Github、Gitee")]),s._v("、使用"),t("code",[s._v("Github Actions")]),s._v("实现源码自动编译再到服务器的部署。这一路上我都在学习新的知识、了解新的技术（对与我自己来说）。面对这些扑面而来新技术、新问题，越来越难以掩盖我追求创新、创造热情，也越来越难以掩盖我是一个菜鸟的事实。未来还有很长的路要走，一步一个脚印扎实的走好每一步是我现在所能做的且必须做的事。正如俗话：道阻且长，行则降至！")]),s._v(" "),t("h3",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://help.aliyun.com/document_detail/405635.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("yum 安装 git 阿里云官网教程"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("[nginx: "),t("a",{attrs:{href:"https://www.cnblogs.com/ghjbk/p/6744131.html",target:"_blank",rel:"noopener noreferrer"}},[s._v('emerg] the "ssl" parameter requires ngx_http_ssl_module in /usr/local/nginx/conf/nginx.conf:37'),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://yundun.console.aliyun.com/?spm=5176.12818093.ProductAndService--ali--widget-home-product-recent.dre0.5adc16d0JnmLIr&p=cas#/overview/cn-hangzhou",target:"_blank",rel:"noopener noreferrer"}},[s._v("SSL证书安装阿里云官网教程"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.it235.com/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/Linux/linux01.html#nginx%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[s._v("君哥的学习笔记"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.bilibili.com/video/BV1gt411A798?p=6",target:"_blank",rel:"noopener noreferrer"}},[s._v("君哥的视频教程"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/49741341",target:"_blank",rel:"noopener noreferrer"}},[s._v("node 环境配置"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/goloving/p/14788900.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("node 安装版本问题"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/qianxing111/article/details/80091187",target:"_blank",rel:"noopener noreferrer"}},[s._v("定时任务"),t("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=e.exports}}]);