(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{462:function(s,e,t){s.exports=t.p+"assets/img/image-20220127200239268.061b2a28.png"},463:function(s,e,t){s.exports=t.p+"assets/img/image-20220127200532892.be0211ae.png"},496:function(s,e,t){"use strict";t.r(e);var a=t(30),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"在-centos-上安装-docker-引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-centos-上安装-docker-引擎"}},[s._v("#")]),s._v(" 在 CentOS 上安装 Docker 引擎")]),s._v(" "),a("blockquote",[a("p",[s._v("本文翻译自"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker官网"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"先决条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先决条件"}},[s._v("#")]),s._v(" 先决条件")]),s._v(" "),a("h4",{attrs:{id:"操作系统要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作系统要求"}},[s._v("#")]),s._v(" 操作系统要求")]),s._v(" "),a("p",[s._v("要安装 Docker Engine，您需要 CentOS 7 或 8 的维护版本。存档版本不受支持或测试。")]),s._v(" "),a("p",[a("code",[s._v("centos-extras")]),s._v("必须启用存储库。此存储库默认启用，但如果您已禁用它，则需要 "),a("a",{attrs:{href:"https://wiki.centos.org/AdditionalResources/Repositories",target:"_blank",rel:"noopener noreferrer"}},[s._v("重新启用它"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("推荐使用"),a("code",[s._v("overlay2")]),s._v("存储驱动。")]),s._v(" "),a("h3",{attrs:{id:"卸载旧版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载旧版本"}},[s._v("#")]),s._v(" 卸载旧版本")]),s._v(" "),a("p",[s._v("旧版本的 Docker 被称为"),a("code",[s._v("docker")]),s._v("或"),a("code",[s._v("docker-engine")]),s._v(". 如果安装了这些，请卸载它们以及相关的依赖项。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("code",[s._v("yum")]),s._v("如果报告没有安装这些软件包，那也没关系。")]),s._v(" "),a("p",[a("code",[s._v("/var/lib/docker/")]),s._v("的内容，包括图像、容器、卷和网络都被保留。Docker 引擎包现在称为"),a("code",[s._v("docker-ce")]),s._v("（"),a("code",[s._v("docker-ce")]),s._v("：社区版 Docker（个人学习推荐使用该版本），"),a("code",[s._v("docker-ee")]),s._v("：企业版 Docker）")]),s._v(" "),a("h3",{attrs:{id:"安装方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装方法"}},[s._v("#")]),s._v(" 安装方法")]),s._v(" "),a("p",[s._v("您可以根据需要以不同的方式安装 Docker Engine：")]),s._v(" "),a("ul",[a("li",[s._v("大多数用户 "),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-using-the-repository",target:"_blank",rel:"noopener noreferrer"}},[s._v("设置 Docker 的存储库"),a("OutboundLink")],1),s._v("并从中安装，以便于安装和升级任务。这是推荐的方法。")]),s._v(" "),a("li",[s._v("一些用户下载 RPM 包并 "),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-from-a-package",target:"_blank",rel:"noopener noreferrer"}},[s._v("手动安装它"),a("OutboundLink")],1),s._v("并完全手动管理升级。这在诸如在无法访问 Internet 的气隙系统上安装 Docker 等情况下很有用。")]),s._v(" "),a("li",[s._v("在测试和开发环境中，一些用户选择使用自动化 "),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-using-the-convenience-script",target:"_blank",rel:"noopener noreferrer"}},[s._v("便利脚本"),a("OutboundLink")],1),s._v("来安装 Docker。")])]),s._v(" "),a("h4",{attrs:{id:"使用存储库安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用存储库安装"}},[s._v("#")]),s._v(" 使用存储库安装")]),s._v(" "),a("p",[s._v("在新主机上首次安装 Docker Engine 之前，您需要设置 Docker 存储库。之后，您可以从存储库安装和更新 Docker。")]),s._v(" "),a("p",[a("code",[s._v("sudo")]),s._v("是"),a("a",{attrs:{href:"https://blog.csdn.net/as604049322/article/details/120446586?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164328637616780255289484%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=164328637616780255289484&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-120446586.pc_search_result_cache&utm_term=linux&spm=1018.2226.3001.4187",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux"),a("OutboundLink")],1),s._v("系统管理指令，是允许系统管理员让普通用户执行一些或者全部的"),a("code",[s._v("root")]),s._v("命令的一个工具，如"),a("code",[s._v("halt，reboot，su")]),s._v("等等。这样不仅减少了"),a("code",[s._v("root")]),s._v("用户的登录 和管理时间，同样也提高了安全性。"),a("code",[s._v("sudo")]),s._v("不是对"),a("code",[s._v("shell")]),s._v("的一个代替，它是面向每个命令的。")]),s._v(" "),a("h5",{attrs:{id:"设置存储库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置存储库"}},[s._v("#")]),s._v(" 设置存储库")]),s._v(" "),a("p",[s._v("安装"),a("code",[s._v("yum-utils")]),s._v("包（提供"),a("code",[s._v("yum-config-manager")]),s._v(" 实用程序）并设置"),a("strong",[s._v("稳定")]),s._v("的存储库。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要的安装包（安装Docker的依赖库）")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加Docker CE的软件源信息（设置的镜像仓库）")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://download.docker.com/linux/centos/docker-ce.repo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#该仓库是国外的下载速度慢可以修改成国内的镜像仓库")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加Docker CE的软件源信息（国内的镜像仓库）")]),s._v("\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h5",{attrs:{id:"安装-docker-引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-引擎"}},[s._v("#")]),s._v(" 安装 Docker 引擎")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装"),a("em",[s._v("最新版本")]),s._v("的 Docker Engine 和 containerd，或者进入下一步安装特定版本：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果不想一个一个确认安装的包则使用下面的命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("p",[s._v("如果提示接受 GPG 密钥，请验证指纹是否匹配 "),a("code",[s._v("060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35")]),s._v("，如果是，则接受它。")]),s._v(" "),a("blockquote",[a("p",[s._v("如果您启用了多个 Docker 存储库，在 yum install 或 yum update 命令中未指定版本的情况下安装或更新，则总是安装可能的最高版本，这可能不适合您的稳定性需求。")])]),s._v(" "),a("p",[s._v("此命令会安装 Docker，但不会启动 Docker。它还会创建一个 "),a("code",[s._v("docker")]),s._v("组，但是默认情况下它不会将任何用户添加到该组中。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("要安装"),a("strong",[s._v("特定版本")]),s._v("的 Docker Engine，请在 repo 中列出可用版本，然后选择并安装：")])]),s._v(" "),a("ul",[a("li",[s._v("列出并排序您的存储库中可用的版本。此示例按版本号从最高到最低对结果进行排序，并被截断：")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum list docker-ce --showduplicates "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -r\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例子：")]),s._v("\ndocker-ce.x86_643:18.09.1-3.el7\t\t\tdocker-ce-stable\ndocker-ce.x86_643:18.09.0-3.el7\t\t\tdocker-ce-stable\ndocker-ce.x86_6418.06.1.ce-3.el7\t\tdocker-ce-stable\ndocker-ce.x86_6418.06.e.ce-3.el7\t\tdocker-ce-stable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("返回的列表取决于启用的存储库，并且特定于您的 CentOS 版本（"),a("code",[s._v("e17")]),s._v("就是 "),a("code",[s._v("CentOS 7.x")]),s._v(" 版本； "),a("code",[s._v("e18")]),s._v("则是"),a("code",[s._v("CentOS 8.2")]),s._v("）")]),s._v(" "),a("ul",[a("li",[s._v("通过其完全限定的包名称安装特定版本，即包名称 ( "),a("code",[s._v("docker-ce")]),s._v(") 加上版本字符串（第 2 列），从第一个冒号 ( "),a("code",[s._v(":")]),s._v(") 开始，一直到第一个连字符，用连字符 ("),a("code",[s._v("-")]),s._v(") 分隔。例如，"),a("code",[s._v("docker-ce-18.09.1")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("VERSION_STRING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker-ce-cli-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("VERSION_STRING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" containerd.io\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce-18.09.1 docker-ce-cli-18.09.1 containerd.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("此命令会安装 Docker，但不会启动 Docker。它还会创建一个 "),a("code",[s._v("docker")]),s._v("组，但是默认情况下它不会将任何用户添加到该组中。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("启动 Docker。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 docker 版本看是否启动成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[a("code",[s._v("hello-world")]),s._v(" 通过运行映像来验证 Docker 引擎是否已正确安装。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此命令下载测试映像并在容器中运行它。当容器运行时，它会打印一条消息并退出。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(462),alt:"image-20220127200239268"}})]),s._v(" "),a("p",[s._v("查看下载的镜像")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:t(463),alt:"image-20220127200532892"}})]),s._v(" "),a("p",[s._v("其他命令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 docker 的状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启 docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 docker 服务开启自启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("这将安装并运行 Docker 引擎。用于"),a("code",[s._v("sudo")]),s._v("运行 Docker 命令。继续"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/linux-postinstall/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux 后安装"),a("OutboundLink")],1),s._v("以允许非特权用户运行 Docker 命令和其他可选配置步骤。")]),s._v(" "),a("h5",{attrs:{id:"升级-docker-引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级-docker-引擎"}},[s._v("#")]),s._v(" 升级 Docker 引擎")]),s._v(" "),a("p",[s._v("要升级 Docker Engine，请按照"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-using-the-repository",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装说明"),a("OutboundLink")],1),s._v("，选择您要安装的新版本。")]),s._v(" "),a("h3",{attrs:{id:"卸载-docker-引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载-docker-引擎"}},[s._v("#")]),s._v(" 卸载 Docker 引擎")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("卸载 Docker 引擎、CLI 和 Containerd 软件包：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ sudo yum remove docker-ce docker-ce-cli containerd.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("主机上的映像、容器、卷或自定义配置文件不会自动删除。要删除所有映像、容器和卷：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ sudo rm -rf /var/lib/docker\n$ sudo rm -rf /var/lib/containerd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("p",[s._v("您必须手动删除任何已编辑的配置文件。")]),s._v(" "),a("p",[s._v("更多内容请移步"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker官网"),a("OutboundLink")],1),s._v("自行查看。")]),s._v(" "),a("h3",{attrs:{id:"阿里云镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里云镜像加速"}},[s._v("#")]),s._v(" 阿里云镜像加速")]),s._v(" "),a("p",[s._v("登录阿里云在首页"),a("code",[s._v("产品")]),s._v("处选择"),a("code",[s._v("容器与中间件 -> 容器镜像服务 ACR -> 管理控制台 -> 镜像工具 -> 镜像加速器")]),s._v("在操作文档处根据对应的操作系统进行操作即可。")]),s._v(" "),a("p",[s._v("1、创建一个目录")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2、修改"),a("code",[s._v("daemon")]),s._v("配置文件"),a("code",[s._v("/etc/docker/daemon.json")]),s._v("来使用加速器")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('sudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://ba76625f.mirror.aliyuncs.com"]\n}\nEOF\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("3、重启服务")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4、重启"),a("code",[s._v("docker")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"使用docker安装nginx服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用docker安装nginx服务"}},[s._v("#")]),s._v(" 使用Docker安装Nginx服务")]),s._v(" "),a("ol",[a("li",[s._v("查看"),a("code",[s._v("Docker")]),s._v("镜像仓库中"),a("code",[s._v("Nginx")]),s._v("的可用版本。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("拉取最新版的"),a("code",[s._v("Nginx")]),s._v("镜像")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull nginx:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("查看本地镜像")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("运行容器。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name nginx-test -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 -d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("命令参数说明：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("--name nginx-test")]),s._v("：容器名称。")]),s._v(" "),a("li",[a("code",[s._v("-p 8080:80")]),s._v("： 端口进行映射，将本地"),a("code",[s._v("8080")]),s._v("端口映射到容器内部的"),a("code",[s._v("80")]),s._v("端口。")]),s._v(" "),a("li",[a("code",[s._v("-d nginx")]),s._v("： 设置容器在后台一直运行。")])]),s._v(" "),a("p",[s._v("命令输出如下所示：")]),s._v(" "),a("p",[s._v("报错"),a("code",[s._v("Error starting userland proxy: listen tcp4 0.0.0.0:8080: bind: address already in use.")]),s._v("端口被占用了，可以切换成别的端口。或者可以先使用"),a("code",[s._v("netstat -tanlp")]),s._v("命令找到被那个应用占用了，然后用"),a("code",[s._v("kill 占用端口进程的PID")]),s._v("命令杀死该进程。")]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("在浏览器地址栏输入"),a("code",[s._v("http://<ECS公网IP地址>:8080")]),s._v("访问"),a("code",[s._v("Nginx")]),s._v("服务即可看到欢迎页面。如果无法访问可以先检查阿里云服务器的安全组中对应的端口（例如这里的"),a("code",[s._v("8080")]),s._v("）是否开放。")])]),s._v(" "),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("p",[s._v("1、一个大佬的博客："),a("a",{attrs:{href:"https://www.pdai.tech/md/devops/docker/docker-02-basic.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java 全栈知识体系"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("2、"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker官网"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("3、"),a("a",{attrs:{href:"https://notes.youngkbt.cn/docker/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("YoungKbt blog"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);