(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{464:function(s,t,a){s.exports=a.p+"assets/img/image-20220124212416568.4e852570.png"},465:function(s,t,a){s.exports=a.p+"assets/img/image-20220124212922054.910d0ff4.png"},466:function(s,t,a){s.exports=a.p+"assets/img/image-20220125134525836.d99705c2.png"},467:function(s,t,a){s.exports=a.p+"assets/img/image-20220125134914410.42bee658.png"},468:function(s,t,a){s.exports=a.p+"assets/img/image-20220125140202967.6e024c1b.png"},469:function(s,t,a){s.exports=a.p+"assets/img/image-20220125142555898.6f12cc50.png"},500:function(s,t,a){"use strict";a.r(t);var n=a(30),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"github-page-部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#github-page-部署"}},[s._v("#")]),s._v(" GitHub Page 部署")]),s._v(" "),n("p",[s._v("打开"),n("code",[s._v("Github")]),s._v("的项目，并在项目中找到"),n("code",[s._v("Settings")]),s._v("点击进行设置。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(464),alt:"image-20220124212416568"}})]),s._v(" "),n("p",[s._v("找到"),n("code",[s._v("Pages")]),s._v("将"),n("code",[s._v("Source")]),s._v("中的分支修改为"),n("code",[s._v("gh-pages")]),s._v("（编译后的博客页面），然后点击保存，最终上方的网址就是博客的地址。")]),s._v(" "),n("img",{attrs:{src:a(465),alt:"image-20220124212922054"}}),s._v(" "),n("h3",{attrs:{id:"github-actions-自动部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-自动部署"}},[s._v("#")]),s._v(" GitHub Actions 自动部署")]),s._v(" "),n("p",[s._v("实现 GitHub 的自动部署，以及 GitHub 的仓库同步到 Gitee 中，最后 Gitee 将仓库同步到到服务器。")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://notes.youngkbt.cn/about/website/deploy/#%E8%87%AA%E5%8A%A8%E5%8C%96%E6%96%87%E4%BB%B6%E6%B5%81%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"}},[s._v("自动化文件流程"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("strong",[s._v("yml 执行流程")])]),s._v(" "),n("p",[s._v("当把项目源码推送到仓库的 "),n("code",[s._v("master")]),s._v(" 主支时，该 "),n("code",[s._v("yml")]),s._v(" 文件开始执行。该文件执行的第三步，就会执行 "),n("code",[s._v("deploy.sh")]),s._v(" 脚本部署文件，完成把打包文件提交到 "),n("code",[s._v("gh-pages")]),s._v(" 分支下，该文件的第四步，则是把 "),n("code",[s._v("Github")]),s._v(" 仓库的代码同步到 "),n("code",[s._v("Gitee")]),s._v(" 仓库里，包括 "),n("code",[s._v("gh-pages")]),s._v("分支（双方仓库名字要一致），该文件第五步，则是手动点击了 "),n("code",[s._v("Gitee")]),s._v(" 的更新部署按钮。（"),n("code",[s._v("Gitee")]),s._v(" 自动更新部署需要 99元/年，没钱只能利用脚本手动点击按钮更新）")]),s._v(" "),n("p",[n("strong",[s._v("yml 被执行流程")])]),s._v(" "),n("p",[s._v("当第一次提交项目到仓库时，"),n("code",[s._v("Github")]),s._v(" 会自动在项目根目录找到 "),n("code",[s._v("/.github/workflows/")]),s._v(" 下的 "),n("code",[s._v("yml")]),s._v(" 文件，如 "),n("code",[s._v("ci.yml")]),s._v("，并且执行该 "),n("code",[s._v("ci.yml")]),s._v(" 文件；")]),s._v(" "),n("p",[s._v("当第二次乃至后面提交项目到仓库时，"),n("code",[s._v("Github")]),s._v(" 判断 "),n("code",[s._v("ci.yml")]),s._v(" 内容是否发送变化，没有则执行仓库的 "),n("code",[s._v("ci.yml")]),s._v(" 文件，有则先更新文件再执行。")]),s._v(" "),n("p",[n("code",[s._v("ci.yml")]),s._v(" 文件：")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" CI\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#on: [push]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 master 分支发生 push 事件时触发。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" master\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置环境变量")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("TZ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Asia/Shanghai "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时区（设置时区可使页面中的 最近更新时间 使用时区时间）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作流")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义名称")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 必填，运行在虚拟机环境 ubuntu-latest")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("strategy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matrix")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("14.x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤1")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Checkout "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤1，拉取代码")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用的动作。格式：userName/repoName。作用：检出仓库，获取源码。 官方actions库：https://github.com/actions")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v1\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Use Node.js $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" matrix.node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤2")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node@v1 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 作用：安装nodejs")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" matrix.node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" run deploy.sh "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤3：执行脚本 deploy.sh")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置环境变量，未设置则不运行")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("GITHUB_TOKEN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.ACCESS_TOKEN "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# token")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("SSH_PRIVATE_KEY")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.GITEE_RSA_PRIVATE_KEY "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 私钥")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm install "),n("span",{pre:!0,attrs:{class:"token important"}},[s._v("&&")]),s._v(" npm run deploy "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 deploy.sh 脚本，位于项目根目录")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Push Matser To Gitee "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤4：GitHub 内容同步到 Gitee，同步仓库是 master")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" wearerequired/git"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("mirror"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("action@master\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("SSH_PRIVATE_KEY")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.GITEE_RSA_PRIVATE_KEY "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从源到目的地")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("source-repo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git@github.com:gyf11069/gyf11069.github.io.git"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Github 仓库地址")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("destination-repo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git@gitee.com:gyunf/gyf11069.git"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Gitee 仓库地址")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - name: Build Gitee Pages # 步骤5：自动部署到 Gitee Pages")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   uses: yanglbme/gitee-pages-action@master")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   with:")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     # 注意替换为你的 Gitee 用户名")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     gitee-username: gyf11069")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     # 注意在 Settings -> Secrets 配置 GITEE_PASSWORD")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     gitee-password: ${{ secrets.GITEE_PASSWORD }}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     # 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错.一般地址和仓库名一致，如果地址改了，仓库名不改，要以地址为准（地址仅需后缀，即 https://gitee.com/<username>/xxx 的 xxx 即可）")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     gitee-repo: gyf11069/gyf11069")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     # 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     branch: gh-pages")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br")])]),n("p",[s._v("将远程推送的操作写成"),n("code",[s._v("push.sh")]),s._v("脚本：")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本脚本为自动部署的入口脚本，只需执行该脚本，即可实现 GitHub 的自动部署，以及 GitHub 的仓库同步到 Gitee 中，最后 Gitee 将仓库同步到到服务器")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GITHUB_REPO")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("git@github.com:gyf11069/gyf11069.github.io.git\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("comment")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$comment")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("comment")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"更新博客内容 + GitHub Actions 自动部署"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${comment}")]),s._v('"')]),s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $1 是启动该脚本传来的参数，如 sh push.sh hello，其中 hello 就会插入到 $1 处，如果想两个参数，则加 $2")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITHUB_REPO")]),s._v("   \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("写完文章后，直接在根目录使用"),n("code",[s._v("git")]),s._v("执行如下命令即可将代码推送到"),n("code",[s._v("Github")]),s._v("上。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行推送脚本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" push.sh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("所遇问题：")]),s._v(" "),n("p",[s._v("1、执行"),n("code",[s._v("push.sh")]),s._v("脚本后"),n("code",[s._v("Github")]),s._v("仓库中的"),n("code",[s._v("gh-pages")]),s._v("分支下的文件没有推送成功。")]),s._v(" "),n("p",[s._v("问题分析：")]),s._v(" "),n("p",[s._v("查看"),n("code",[s._v("docs/.vuepress/dist")]),s._v("文件夹还未删除，如果执行了"),n("code",[s._v("deploy.sh")]),s._v("脚本的话就会删除该文件夹，由此可知"),n("code",[s._v("deploy.sh")]),s._v("脚本没有正常执行。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(466),alt:"image-20220125134525836"}})]),s._v(" "),n("p",[s._v("我们也可以在项目仓库中点击"),n("code",[s._v("Actions")]),s._v("查看脚执行情况。发现我的"),n("code",[s._v("CI")]),s._v("即（"),n("code",[s._v("ci.ymal")]),s._v("）脚本执行失败了。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(467),alt:"image-20220125134914410"}})]),s._v(" "),n("p",[s._v("点击失败的"),n("code",[s._v("workfow runs")]),s._v("查看发现是"),n("code",[s._v("deploy.sh")]),s._v("脚本执行失败导致的。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(468),alt:"image-20220125140202967"}})]),s._v(" "),n("p",[s._v("继续浏览"),n("code",[s._v("run deploy.sh")]),s._v("文件执行的流程发现了错误，说是没有发现与"),n("code",[s._v("md")]),s._v("文件侧边栏匹配的页面，我打开本地博客项目的文件夹发现我上次手动编译时的"),n("code",[s._v("dist")]),s._v("文件夹还未删除，猜测可能是我添加了文章（以"),n("code",[s._v(".md")]),s._v("形式的文件）但是"),n("code",[s._v("dist")]),s._v("文件夹还是更新之前的造成了不匹配的错误。")]),s._v(" "),n("p",[s._v("删除"),n("code",[s._v("dist")]),s._v("文件夹后还是报一样的错误。仔细的查看报错信息。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(469),alt:"image-20220125142555898"}})]),s._v(" "),n("p",[s._v("渲染"),n("code",[s._v("/pages/85c53a/")]),s._v("时出现"),n("code",[s._v("undefined")]),s._v("错误，是因为我没有在 nav.js 中指明这个永久链接吗？")]),s._v(" "),n("p",[s._v("经历了一个多小时的排查和沉思后，我再次打开"),n("code",[s._v("/pages/85c53a/")]),s._v("和"),n("code",[s._v("/pages/0b9f02/")]),s._v("文件发现我有两个"),n("code",[s._v(".md")]),s._v("文件的链接都是"),n("code",[s._v("/pages/0b9f02/")]),s._v("。这两个文件冲突了才导致生成的侧边栏不匹配，我将其中一个文件删除重写了（在"),n("code",[s._v("vuepress dev docs")]),s._v("本地启动项目时重写文件会自动生成一个新的链接），再次推送时就成功了。")]),s._v(" "),n("p",[s._v("2、从"),n("code",[s._v("Github")]),s._v("仓库推送到"),n("code",[s._v("Gitee")]),s._v("仓库也没有成功。")]),s._v(" "),n("p",[s._v("分析：复制"),n("code",[s._v("GITEE_RSA_PRIVATE_KEY")]),s._v("的"),n("code",[s._v("Value")]),s._v("值（为 "),n("code",[s._v("id_rsa")]),s._v(" 文件的内容）没有复制完整。"),n("a",{attrs:{href:"https://notes.youngkbt.cn/about/website/deploy/#%E9%85%8D%E7%BD%AE%E5%AF%86%E9%92%A5",target:"_blank",rel:"noopener noreferrer"}},[s._v("什么是"),n("code",[s._v("GITEE_RSA_PRIVATE_KEY")]),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),n("p",[s._v("一个简单的错误，我花了一下午的时间才找到原因并解决。回过头来看还是挺值的，很好的锻炼了我排查问题的能力。出错时不要慌，先找到在哪出的错，然后耐心仔细的根据报错信息查找线索，按照报错的信息猜测可能出错的地方，最后就是验证一下你的猜测是否正确，直到你的问题解决。当然排查问题过程中需要你详细了解你的代码或脚本每一步都干了些什么，根据表现出的错误信息一层一层的深挖本质，只有这样你才能顺利的找到问题根源并解决问题。")])])}),[],!1,null,null,null);t.default=e.exports}}]);